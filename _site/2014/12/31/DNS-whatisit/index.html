<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">

<head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Adventures in the DNS jungle - part one &middot; fedtechrants ->
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-144-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


<body>

  <div class="container content">
    <div class="masthead">
      <h3 class="masthead-title">
        <a href="http://federicomaffei.github.io" title="Home">fedtechrants -></a>
        <small>another beginner's blog on programming computers.</small>
      </h3>
    </div>

    <div class="post">
  <h1 class="post-title">Adventures in the DNS jungle - part one</h1>
  <span class="post-date">31 Dec 2014</span>
  <h3 id="introduction-to-dns">Introduction to DNS</h3>

<p>In the last three months have done my fair amount of job interviews, of course looking for a software engineer job, and a question that surfaced AN AWFUL LOT, and when I mean a lot I mean always, is:</p>

<p><em>So, dear wannabe webdev with little or no experience in the field, could you tell me what happens when I type an URL in a web browser on my computer and press enter?</em></p>

<p>Of course the possible answers would range from &quot;MMMHHH, wellll, I&#39;m not sure where to start...&quot; to a whole book on networking.</p>

<p>But I think that mentioning <strong>DNS</strong> would make the best start.</p>

<p>Let&#39;s think about it. When we type the address of the resource we want to browse, we use the alphabet, right? With letters and names easily readable and memorable by a human being.</p>

<p>But a machine needs an <strong>IP address</strong> to recognize another machine connected to a network. An IP address is numerical, for example 192.168.0.1. Less readable, it seems.</p>

<p>And here is where DNS comes to play. DNS means Domain Name System, and that represents exactly what it is: a system that translates <strong>domain names</strong> (e.g <em>www.something.com</em>), into IP addresses. I think of it as a phone book. It is queried with a domain name and, after a lookup, returns an IP.</p>

<p>How does the magic happen? Let&#39;s look into it.</p>

<h3 id="some-definitions">Some definitions</h3>

<p>So we can define a domain name as a string composed by one or more parts, called <strong>labels</strong>, concatenated and delimited by dots with a <strong>hierarchical</strong> logic.</p>

<p>In the case of www.example.com, for instance, we have three labels:</p>

<ul>
<li><p><em>com</em> is the <strong>top-level</strong> domain. This should sound familiar. Famous top-level domains are also <em>net</em>, <em>org</em>, <em>.uk</em>, <em>.it</em>, <em>gov</em>, etc.</p></li>
<li><p>Hierarchy goes from left to right, so we can say that <em>example</em> is a <strong>subdomain</strong> of <em>com</em>. And so on.</p></li>
<li><p>A name that can be associated to a specific machine connected to a network with an IP address is called <strong>hostname</strong>. Let&#39;s say it&#39;s the leftmost work in the domain name.</p></li>
</ul>

<h3 id="questions-that-pop-out-at-this-point">Questions that pop out at this point</h3>

<p>Q: So all the hostnames reachable via a specific domain have a specific IP address! There must be BILLIONS of them. How do we make sure everyone is unique?</p>

<p>A: There are entities that have the authority to assign and register names under one or more top-level domain, called <strong>registrars</strong>. The registered name then becomes part of a central database known as the <em>whois database</em>.</p>

<p>Q: Now, how do we retrieve this infamous IP address by just knowing a domain name? Who can <strong>resolve</strong> this request?</p>

<p>A: Well, the domain name is resolved into an IP address by querying <strong>authoritative name servers</strong>. These machines are the endpoints of a database that can map domain names to IPs. The authoritative name servers of the top level domain are also called <strong>root level servers</strong>.</p>

<p>Q: OK, but wait a second. How in the heavens does my machine know the address of the name server to query? I though I just entered an address in the browser!</p>

<p>A: Every client machine has a default <strong>DNS resolver</strong>, which is responsible of initiating the sequence of queries that will ultimately lead to the resolution.
It is very important to note that the system&#39;s DNS setting can be also overridden by the <strong>Internet Service Provider</strong> (ISP) settings, so the DNS lookup process can be very OS-specific and ISP-specific. This would deserve a whole post apart.</p>

<h3 id="how-to-resolve-an-address-(ideally)">How to resolve an address (ideally)</h3>

<p>Resolving an address via DNS is also called <strong>lookup</strong>, and it is a recursive process. Now that we know the purpose of DNS, and the concepts involved in the process, we can dig a little deeper into its basic mechanism, which is roughly:</p>

<ol>
<li><p>The resolver has knowledge of the addresses of root name servers, from where the search can start.</p></li>
<li><p>The root name server will return a name server which is authoritative for the top-level domain.</p></li>
<li><p>This server will give the address of the name server authoritative for the second level domain.</p></li>
<li><p>If the hostname is resolved, an IP address is returned. Otherwise step 3) is repeated for all the labels of the domain name in sequence, until a result is reached.</p></li>
</ol>

<p>I did an amazing diagram to show that.</p>

<p><img src="http://federicomaffei.github.io/public/images/dnsbasic.jpg" class="center-image"></img></p>

<h3 id="real-life-problems">Real life problems</h3>

<p>The mechanism explained above is great, but if applied in real life application, it will lead to a bottleneck. Every lookup would involve root servers and authoritative servers, which would be hit by gazillions of queries every day, putting a huge burden on the system since the start.</p>

<p>To solve this, of course a <strong>caching</strong> system comes to help. Yes, DNS allows and encourages caching. This way another class of DNS servers comes into play, the <strong>recursive name servers</strong>. They can perform recursive lookups and cache results, returning them when queried even if they don&#39;t have the authority to generate the results themselves.</p>

<p>Caching recursive DNS server are usually managed by Internet Service Providers, and are able to resolve addresses without waiting for the &quot;authorities&quot;. This means that a query will rarely have to hit the root name servers, since there is a very high likelihood that the hostname/IP request is already cached by one of the delegated DNS servers that are called by recursion.</p>

<p>We could say that in reality a root server will be hit as a last resort to track down an authoritative server for a given domain.</p>

<p>The amount of time for which a lookup result is stored on a server is called <strong>time-to-live (TTL)</strong> and can vary with the configuration.</p>

<p>One side effect of the heavy caching that involves the DNS is that when a new domain is registered, or there is a change in any domain-related settings, there will be a time lag for the propagation of it to all the cached results.</p>

<p>It is noteworthy that cached DNS results from your browsing could be stored in your router, or somewhere within you browser memory as well. These IP addresses seem to be everywhere these days!</p>

<h3 id="conclusion">Conclusion</h3>

<p>I barely scratched the surface of the Domain Name System topic, and that alone took me a day of research and writing.</p>

<p>So I decided to avoid making this post too long, so that beginners that are going to find it will profit, and add a &quot;part one&quot; to the title. This will allow me to decide which part of DNS is worth more digging, and write the sequel.</p>

<p>Stay tuned!</p>

   <div id="disqus_thread"></div>
    <script type="text/javascript">
        /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
        var disqus_shortname = 'federicomaffei'; // required: replace example with your forum shortname

        /* * * DON'T EDIT BELOW THIS LINE * * */
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
    
</div>

<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="http://federicomaffei.github.io/2014/12/29/REST-whatisit/">
            A Beginner's guide to REST services
            <small>29 Dec 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="http://federicomaffei.github.io/2014/11/17/newjob/">
            New Job.
            <small>17 Nov 2014</small>
          </a>
        </h3>
      </li>
    
      <li>
        <h3>
          <a href="http://federicomaffei.github.io/2014/08/13/graduation/">
            Graduation!
            <small>13 Aug 2014</small>
          </a>
        </h3>
      </li>
    
  </ul>
</div>


    <div class="footer">
      <em>
        <p>
          &copy; 2015. no rights reserved. Thanks for reading!
        </p>
      </em>
    </div>
  </div>

</body>
</html>
